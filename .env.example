# LightRAG Environment Configuration Example

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DATABASE=airag
POSTGRES_WORKSPACE=default

# PostgreSQL Connection Pool Settings
POSTGRES_MAX_CONNECTIONS=50
POSTGRES_CONNECTION_RETRIES=3
POSTGRES_CONNECTION_RETRY_BACKOFF=0.5
POSTGRES_CONNECTION_RETRY_BACKOFF_MAX=10.0
POSTGRES_POOL_CLOSE_TIMEOUT=5.0
POSTGRES_STATEMENT_CACHE_SIZE=0

# PostgreSQL Vector Index Configuration
POSTGRES_VECTOR_INDEX_TYPE=HNSW
POSTGRES_HNSW_M=16
POSTGRES_HNSW_EF=64
POSTGRES_IVFFLAT_LISTS=100

# PostgreSQL SSL Configuration (optional)
# POSTGRES_SSL_MODE=require
# POSTGRES_SSL_CERT=/path/to/client-cert.pem
# POSTGRES_SSL_KEY=/path/to/client-key.pem
# POSTGRES_SSL_ROOT_CERT=/path/to/root-cert.pem
# POSTGRES_SSL_CRL=/path/to/crl.pem

# PostgreSQL Server Settings (for Supabase, etc.)
# POSTGRES_SERVER_SETTINGS={"search_path": "public"}

# ============================================
# LLM Configuration (Azure OpenAI)
# ============================================
LLM_BINDING=azure_openai
LLM_MODEL=gpt-4o
LLM_BINDING_HOST=
LLM_BINDING_API_KEY=

# Azure OpenAI specific settings for LLM
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com/

# ============================================
# Embedding Configuration (Azure OpenAI)
# ============================================
EMBEDDING_BINDING=azure_openai
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIM=1536
EMBEDDING_BINDING_API_KEY=your_azure_embedding_api_key_here
EMBEDDING_BINDING_HOST=

# Azure OpenAI specific settings for Embeddings
AZURE_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AZURE_EMBEDDING_API_VERSION=2024-02-15-preview
AZURE_EMBEDDING_ENDPOINT=https://your-resource-name.openai.azure.com/

# ============================================
# Document Processing Configuration
# ============================================
# Controls how many documents are processed in each batch during pipeline processing
# For example: If you upload 55 PDF files and set DOCUMENT_PROCESSING_BATCH_SIZE=10,
# the system will process them in 6 batches: 5 batches of 10 files + 1 batch of 5 files
# Each batch processes files in parallel, then moves to the next batch
DOCUMENT_PROCESSING_BATCH_SIZE=10

# Parallel processing settings
MAX_PARALLEL_INSERT=4
MAX_ASYNC=8
EMBEDDING_FUNC_MAX_ASYNC=16
EMBEDDING_BATCH_NUM=32

# Chunking settings
CHUNK_SIZE=1200
CHUNK_OVERLAP_SIZE=100

# PDF Preprocessing Configuration
PDF_PREPROCESS_MAX_CONCURRENCY=2
PDF_PREPROCESS_EXECUTOR=thread

# ============================================
# Storage Configuration
# ============================================
# Use PostgreSQL for all storage (prevents creating files in rag_storage)
LIGHTRAG_KV_STORAGE=PGKVStorage
LIGHTRAG_VECTOR_STORAGE=PGVectorStorage
LIGHTRAG_GRAPH_STORAGE=NetworkXStorage
LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage

# ============================================
# Server Configuration
# ============================================
HOST=0.0.0.0
PORT=9621
WORKING_DIR=./rag_storage
INPUT_DIR=./inputs

# ============================================
# Authentication (optional)
# ============================================
# LIGHTRAG_API_KEY=your_api_key_here

# ============================================
# Web UI Configuration (optional)
# ============================================
# WEBUI_TITLE=My LightRAG Instance  
# WEBUI_DESCRIPTION=Custom LightRAG deployment

# ============================================
# Alternative: Ollama Configuration (Local)
# ============================================
# If you want to use Ollama instead of Azure OpenAI, uncomment and use these:
#
# LLM_BINDING=ollama
# LLM_MODEL=llama3.2:latest
# LLM_BINDING_HOST=http://localhost:11434
#
# EMBEDDING_BINDING=ollama
# EMBEDDING_MODEL=bge-m3:latest
# EMBEDDING_DIM=1024
# EMBEDDING_BINDING_HOST=http://localhost:11434
